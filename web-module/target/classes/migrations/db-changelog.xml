<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

    <changeSet id="1" author="mdcatalog@tut.by">
        <createTable tableName="role">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(40)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="2" author="mdcatalog@tut.by">
        <createTable tableName="user">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="username" type="varchar(70)">
                <constraints nullable="false"/>
            </column>
            <column name="password" type="varchar(72)">
                <constraints nullable="false"/>
            </column>
            <column name="firstname" type="varchar(20)">
                <constraints nullable="false"/>
            </column>
            <column name="middlename" type="varchar(40)">
                <constraints nullable="false"/>
            </column>
            <column name="surname" type="varchar(40)">
                <constraints nullable="false"/>
            </column>
            <column name="deleted" type="boolean" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="role_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fk_user_role" references="role(id)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="2.1" author="mdcatalog@tut.by">
    <createTable tableName="review">
        <column name="id" type="bigint" autoIncrement="true">
            <constraints primaryKey="true" nullable="false"/>
        </column>
        <column name="message" type="varchar(200)">
            <constraints nullable="false"/>
        </column>
        <column name="date" type="datetime">
            <constraints nullable="false"/>
        </column>
        <column name="deleted" type="boolean" defaultValueBoolean="false">
            <constraints nullable="false"/>
        </column>
        <column name="user_id" type="bigint">
            <constraints nullable="false" foreignKeyName="fk_review_user" references="user(id)"/>
        </column>
    </createTable>
</changeSet>

    <changeSet id="2.2" author="mdcatalog@tut.by">
        <createTable tableName="article">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(200)">
                <constraints nullable="false"/>
            </column>
            <column name="message" type="varchar(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="date" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="deleted" type="boolean" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fk_article_user" references="user(id)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="2.3" author="mdcatalog@tut.by">
        <createTable tableName="comment">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="message" type="varchar(200)">
                <constraints nullable="false"/>
            </column>
            <column name="date" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="deleted" type="boolean" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fk_comment_user" references="user(id)"/>
            </column>
            <column name="article_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fk_comment_article" references="article(id)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="2.4" author="mdcatalog@tut.by">
        <createTable tableName="contact">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="address" type="varchar(200)">
                <constraints nullable="false"/>
            </column>
            <column name="phone" type="varchar(200)">
                <constraints nullable="false"/>
            </column>
            <column name="deleted" type="boolean" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="bigint">
                <constraints nullable="false" foreignKeyName="fk_contact_user" references="user(id)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="3" author="mdcatalog@tut.by">
        <insert tableName="role">
            <column name="name" value="ADMINISTRATOR"/>
        </insert>
        <insert tableName="role">
            <column name="name" value="SALE"/>
        </insert>
        <insert tableName="role">
            <column name="name" value="CUSTOMER"/>
        </insert>
        <insert tableName="role">
            <column name="name" value="SECURE API"/>
        </insert>
    </changeSet>

    <changeSet id="4.1" author="mdcatalog@tut.by">
        <insert tableName="user">
            <column name="username" value="admin@email.com"/>
            <column name="password" value="$2a$12$L9eDNHoC6pGJuQAdg4aL6OB1DlCwMObWUPqcpSFoxnah9nxTZbr7m"/>
            <column name="firstname" value="Admin"/>
            <column name="middlename" value="Adminovich"/>
            <column name="surname" value="Adminov"/>
            <column name="role_id" valueNumeric="1"/>
            <column name="deleted" valueBoolean="false"/>
        </insert>
    </changeSet>

    <changeSet id="4.2" author="mdcatalog@tut.by">
        <insert tableName="user">
            <column name="username" value="user@email.com"/>
            <column name="password" value="$2a$12$tDWHFzb42r/VWiEEf9RnxO9p3bjJ1Voqr9Hv06vPMjIR5XraixNwW"/>
            <column name="firstname" value="User"/>
            <column name="middlename" value="Userovich"/>
            <column name="surname" value="Userov"/>
            <column name="role_id" valueNumeric="3"/>
        </insert>
    </changeSet>

    <changeSet id="5.1" author="mdcatalog@tut.by">
        <insert tableName="review">
            <column name="user_id" valueNumeric="1"/>
            <column name="message" value="It is review message #1.
            Your company is the BEST in the world! I will recommend your company to all of friends and relatives!"/>
            <column name="date" valueDate="2019-05-06"/>
            <column name="deleted" valueBoolean="false"/>
        </insert>
    </changeSet>

    <changeSet id="5.2" author="mdcatalog@tut.by">
        <insert tableName="review">
            <column name="user_id" valueNumeric="2"/>

            <column name="message" value="It second review message #2.
            Your company is the BEST in the world! I will recommend your company to all of friends and relatives!"/>
            <column name="date" valueDate="2019-05-06"/>
            <column name="deleted" valueBoolean="false"/>
        </insert>
    </changeSet>

    <changeSet id="5.3" author="mdcatalog@tut.by">
        <insert tableName="review">
            <column name="user_id" valueNumeric="2"/>
            <column name="message" value="It is review message #3.
            Your company is the WORST in the world! I will recommend your company to all of friends and relatives!"/>
            <column name="date" valueDate="2019-05-06"/>
            <column name="deleted" valueBoolean="false"/>
        </insert>
    </changeSet>

    <changeSet id="6.1" author="mdcatalog@tut.by">
        <insert tableName="article">
            <column name="user_id" valueNumeric="1"/>
            <column name="name" value="Amazon trashing millions of unsold items"/>
            <column name="message" value="If you've ever visited a dump or landfill,
            you probably know how sad it is to see tons of unused items go to waste.
            Americans throw out a great deal of otherwise usable products and goods,
            often doing so in the name of freshness, decluttering, and profitability.
            As bad as this is, a growing number of people are recycling or donating their unwanted
            items to those in need. If the trend continues, we may see less garbage in landfills and a
            less wasteful culture going forward.
            That being said, there are a number of corporate entities who don't give donations or recycling
            the same priority as we might.
            In a recent series of investigations, Amazon was revealed to have potentially destroyed millions
            of unsold items in various countries. This is a shocking move, as these products are good as new --
            making donation the more logical choice of disposal."/>
            <column name="date" valueDate="2019-05-07"/>
            <column name="deleted" valueBoolean="false"/>
        </insert>
    </changeSet>

    <changeSet id="6.2" author="mdcatalog@tut.by">
        <insert tableName="article">
            <column name="user_id" valueNumeric="2"/>
            <column name="name" value="Hackers steal payment info from hundreds of online stores"/>
            <column name="message" value="If you've never been the victim of a data breach,
             consider yourself lucky. They've become an everyday part of online life, as they continue to grow in
             frequency and number of people affected.While 2019 has seen its share of breaches so far, 2018 was
             definitely not a good year, either. Cambridge Analytica, the Marriott and others aside from last year,
              one of the popular methods was the Magecart attack where hackers would upload malicious code into
              checkout pages of various online sites to steal personal details and payment info.
            Some high profile hacks involving Magecart last year impacted Ticketmaster and computer shopping giant Newegg."/>
            <column name="date" valueDate="2019-05-06"/>
            <column name="deleted" valueBoolean="false"/>
        </insert>
    </changeSet>

    <changeSet id="6.3" author="mdcatalog@tut.by">
        <insert tableName="article">
            <column name="user_id" valueNumeric="2"/>
            <column name="name" value="Walmart’s newest shipping option might make you cancel Amazon Prime"/>
            <column name="message" value="When you order a product online and you want it the next day, Walmart may be the best way to go. Wait, Walmart?
            Yep. Walmart is giving Amazon a run for its money in the one-day delivery race and you don't even have to pay
            an annual fee to get it.
            Last month, Amazon announced it was offering free next-day shipping to Prime members. Prime membership costs
            $119 a year.
            Walmart's free service, called NextDay, requires an order of at least $35. The one-day service is now operating
             in select cities but will be most places soon.
            Walmart rolls out NextDay
            With next-day service already in Phoenix and Las Vegas, Walmart says Southern California will be going online
            within days."/>
            <column name="date" valueDate="2019-05-10"/>
            <column name="deleted" valueBoolean="false"/>
        </insert>
    </changeSet>

    <changeSet id="7.1" author="mdcatalog@tut.by">
    <insert tableName="comment">
        <column name="user_id" valueNumeric="2"/>
        <column name="article_id" valueNumeric="2"/>
        <column name="message" value="It's a bad article. My comment"/>
        <column name="date" valueDate="2019-05-06"/>
        <column name="deleted" valueBoolean="false"/>
    </insert>
    </changeSet>

    <changeSet id="7.2" author="mdcatalog@tut.by">
        <insert tableName="comment">
            <column name="user_id" valueNumeric="1"/>
            <column name="article_id" valueNumeric="2"/>
            <column name="message" value="I think this article is stupid enough"/>
            <column name="date" valueDate="2019-05-17"/>
            <column name="deleted" valueBoolean="false"/>
        </insert>
    </changeSet>

    <changeSet id="8.1" author="mdcatalog@tut.by">
        <insert tableName="contact">
            <column name="user_id" valueNumeric="2"/>
            <column name="phone" value="333-555-777"/>
            <column name="address" value="New York Street 2"/>
            <column name="deleted" valueBoolean="false"/>
        </insert>
    </changeSet>

</databaseChangeLog>